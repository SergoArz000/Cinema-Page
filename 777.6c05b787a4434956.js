"use strict";(self.webpackChunkCinema_Page=self.webpackChunkCinema_Page||[]).push([[777],{777:(V,w,s)=>{s.r(w),s.d(w,{AuthModule:()=>d});var o=s(433),f=s(6895),p=s(3841),M=s(5698),e=s(8256),Z=s(8374),v=s(1443),P=s(8613),b=s(1740),_=s(5593),C=s(1795);function x(r,n){1&r&&(e.TgZ(0,"small",14),e._uU(1," Email field is required. "),e.qZA())}function Y(r,n){1&r&&(e.TgZ(0,"small",14),e._uU(1," Email format iss incorrect. "),e.qZA())}function N(r,n){1&r&&(e.TgZ(0,"small",14),e._uU(1," Password field is required. "),e.qZA())}function L(r,n){1&r&&(e.TgZ(0,"small",14),e._uU(1," Password is incorrect. "),e.qZA())}const O=function(r,n){return{"ng-invalid":r,"ng-dirty":n}},Q=function(){return["/auth/register"]};class u{constructor(n,t,i,l){this.requestHttp=n,this.router=t,this.toastMessage=i,this.userService=l,this.submitted=!1,this.form=new o.cw({email:new o.NI(null,[o.kI.required,o.kI.email]),password:new o.NI(null,[o.kI.maxLength(15),o.kI.minLength(7),o.kI.required])})}onSubmit(){this.submitted=!0,this.form.markAllAsTouched(),this.form.valid&&""!==this.form.value.email?.trim()&&""!==this.form.value.password?.trim()&&this.checkForUser()}checkForUser(){this.requestHttp.checkForUser(this.form.value.email,this.form.value.password).pipe((0,M.q)(1)).subscribe({next:n=>{0!==n.length?this.loginSuccess(n[0]):this.loginFail()},error:()=>{this.toastMessage.somethingWentWrongMessage(),this.router.navigateByUrl("movies").then()}})}loginSuccess(n){this.userService.logUser(n),this.toastMessage.loginSuccessMessage(n.name),this.router.navigateByUrl("/movies/all").then()}loginFail(){this.userService.logOutUser(),this.toastMessage.loginErrorMessage()}}u.\u0275fac=function(n){return new(n||u)(e.Y36(Z.a),e.Y36(p.F0),e.Y36(v.z),e.Y36(P.K))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-login"]],decls:22,vars:15,consts:[[1,"form-wrapper"],[1,"form-container"],[1,"text-block","container-section"],[1,"login-title"],[1,"login-info"],[1,"form-block","container-section"],[3,"formGroup","ngSubmit"],[1,"form-inner-container"],["type","email","id","email","placeholder","Your email...","formControlName","email","pInputText","",1,"form-input",3,"ngClass"],["class","p-error",4,"ngIf"],["type","password","id","password","placeholder","Your password...","formControlName","password","pInputText","",1,"form-input",3,"ngClass"],["pButton","","pRipple","","type","submit","label","Log in",1,"p-button-warning"],[1,"signUp"],[3,"routerLink"],[1,"p-error"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Login"),e.qZA(),e.TgZ(5,"p",4),e._uU(6,"Welcome back! Please enter your credentials to access your account. "),e.qZA()(),e.TgZ(7,"div",5)(8,"form",6),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(9,"div",7),e._UZ(10,"input",8),e.YNc(11,x,2,0,"small",9),e.YNc(12,Y,2,0,"small",9),e._UZ(13,"input",10),e.YNc(14,N,2,0,"small",9),e.YNc(15,L,2,0,"small",9),e._UZ(16,"button",11),e.TgZ(17,"small",12),e._uU(18," If you don't have an account "),e.TgZ(19,"a",13),e._uU(20," sign up "),e.qZA(),e._uU(21,". "),e.qZA()()()()()()),2&n){let i,l,a,m;e.xp6(8),e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngClass",e.WLB(8,O,t.form.controls.email.errors&&t.submitted,t.form.controls.email.errors&&t.submitted)),e.xp6(1),e.Q6J("ngIf",(null==(i=t.form.get("email"))?null:i.hasError("required"))&&t.form.controls.email.touched&&t.submitted),e.xp6(1),e.Q6J("ngIf",(null==(l=t.form.get("email"))?null:l.hasError("email"))&&t.form.controls.email.touched&&t.submitted),e.xp6(1),e.Q6J("ngClass",e.WLB(11,O,t.form.controls.password.errors&&t.submitted,t.form.controls.password.errors&&t.submitted)),e.xp6(1),e.Q6J("ngIf",(null==(a=t.form.get("password"))?null:a.hasError("required"))&&t.form.controls.password.touched&&t.submitted),e.xp6(1),e.Q6J("ngIf",(null==(m=t.form.get("password"))?null:m.hasError("maxlength"))&&t.form.controls.password.touched&&t.submitted||(null==(m=t.form.get("password"))?null:m.hasError("minlength"))&&t.form.controls.password.touched&&t.submitted),e.xp6(4),e.Q6J("routerLink",e.DdM(14,Q))}},dependencies:[f.mk,f.O5,o._Y,o.Fj,o.JJ,o.JL,p.rH,o.sg,o.u,b.o,_.Hq,C.H],styles:["[_nghost-%COMP%]     .p-element.p-ripple.p-button-warning.p-button.p-component{background-color:#f59e0b}[_nghost-%COMP%]     .p-element.p-ripple.p-button-warning.p-button.p-component:hover{background-color:#d97706}[_nghost-%COMP%]     .p-element.p-ripple.p-button-warning.p-button.p-component:active{background-color:#b45309}[_nghost-%COMP%]     .p-element.p-ripple.p-button-success.p-button.p-component{color:#e8e5e5;background-color:#22c55e}[_nghost-%COMP%]     .p-element.p-ripple.p-button-success.p-button.p-component:hover{background-color:#16a34a}[_nghost-%COMP%]     .p-element.p-ripple.p-button-success.p-button.p-component:active{background-color:#15803d}[_nghost-%COMP%]     .p-element.p-ripple.p-button-outlined.p-button-warning.back-btn.p-button.p-component{background-color:transparent;color:#f59e0b}.form-wrapper[_ngcontent-%COMP%]{width:100%;height:100vh;margin:0;padding:0}.form-container[_ngcontent-%COMP%]{width:75%;height:100%;display:flex;gap:1rem;margin:0 auto;justify-content:center;align-items:center}.container-section[_ngcontent-%COMP%]{width:50%}.text-block[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center}.login-title[_ngcontent-%COMP%]{color:#b0650c;font-weight:900;font-size:40px}.login-info[_ngcontent-%COMP%]{width:75%;color:#e8e5e5;font-size:16px}.form-inner-container[_ngcontent-%COMP%]{margin:15% 0 0;width:100%;padding:0 20.5px;height:100%;display:flex;flex-direction:column;justify-content:flex-end;align-items:center;gap:20px}.form-input[_ngcontent-%COMP%]{width:65%}[_nghost-%COMP%]     .p-button-warning{width:65%;margin:20px 0}.signUp[_ngcontent-%COMP%]{color:#e8e5e5;font-size:16px}.signUp[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#b0650c;text-decoration:none}.signUp[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{color:#f59e0b}@media (max-width: 750px){.form-wrapper[_ngcontent-%COMP%]{height:100%}.form-container[_ngcontent-%COMP%]{width:100%;padding:100px 18.5px;flex-direction:column;justify-content:flex-start}.container-section[_ngcontent-%COMP%]{width:100%}.login-title[_ngcontent-%COMP%]{text-align:center}.login-info[_ngcontent-%COMP%]{width:100%;text-align:center}.form-inner-container[_ngcontent-%COMP%]{margin:0}.form-input[_ngcontent-%COMP%]{width:100%}}"]});var S=s(2101);function E(r,n){1&r&&(e.TgZ(0,"small",25),e._uU(1," Name is required. "),e.qZA())}function R(r,n){1&r&&(e.TgZ(0,"small",25),e._uU(1," Surname is required. "),e.qZA())}function B(r,n){1&r&&(e.TgZ(0,"small",25),e._uU(1," Email is required. "),e.qZA())}function F(r,n){1&r&&(e.TgZ(0,"small",25),e._uU(1," Email format is incorrect "),e.qZA())}function j(r,n){1&r&&(e.TgZ(0,"small",25),e._uU(1," Age is required. "),e.qZA())}function W(r,n){1&r&&(e.TgZ(0,"small",25),e._uU(1," You need to be at least 16 years old. "),e.qZA())}function H(r,n){1&r&&(e.TgZ(0,"small",25),e._uU(1," Password is required. "),e.qZA())}function z(r,n){1&r&&(e.TgZ(0,"small",25),e._uU(1," Password is too short. "),e.qZA())}function D(r,n){1&r&&(e.TgZ(0,"small",25),e._uU(1," Password is too long. "),e.qZA())}function G(r,n){1&r&&(e.TgZ(0,"small",25),e._uU(1," Repeat Your password. "),e.qZA())}function X(r,n){1&r&&(e.TgZ(0,"small",25),e._uU(1," Passwords didn't match "),e.qZA())}const g=function(r,n){return{"ng-invalid":r,"ng-dirty":n}},T=function(){return["/auth/login"]};class h{constructor(n,t,i,l,a){this.sendHttp=n,this.requestHttp=t,this.router=i,this.toastMessage=l,this.userService=a,this.users=[],this.userCheck=!1,this.submitted=!1,this.didntMatch=!1,this.form=new o.cw({name:new o.NI("",[o.kI.required]),surname:new o.NI("",[o.kI.required]),email:new o.NI(null,[o.kI.email,o.kI.required]),age:new o.NI(null,[o.kI.min(16),o.kI.max(100),o.kI.required]),password:new o.NI(null,[o.kI.maxLength(15),o.kI.minLength(7),o.kI.required]),repeatPassword:new o.NI(null,[o.kI.required])})}ngOnInit(){this.requestUsers()}requestUsers(){this.requestHttp.getUsers().pipe((0,M.q)(1)).subscribe({next:n=>{this.users=n},error:()=>{this.toastMessage.somethingWentWrongMessage(),this.router.navigateByUrl("movies").then()}})}onSubmit(){this.submitted=!0,this.userCheck=!1,this.didntMatch=this.form.value.password!==this.form.value.repeatPassword,this.form.valid&&""!==this.form.value.name?.trim()&&""!==this.form.value.surname?.trim()&&!this.didntMatch?(this.registerEmailMatch(),this.userCheck||this.registerSuccess()):this.form.markAllAsTouched()}registerEmailMatch(){this.users?.map(n=>{n.email===this.form.value.email&&(this.userCheck=!0,this.toastMessage.registerErrorMessage())})}registerSuccess(){this.userService.logUser(this.form.value),this.toastMessage.registerSuccessMessage(),this.sendHttp.sendUserData(this.form.value).subscribe(),this.form.reset(),this.router.navigateByUrl("movies").then()}}h.\u0275fac=function(n){return new(n||h)(e.Y36(S.l),e.Y36(Z.a),e.Y36(p.F0),e.Y36(v.z),e.Y36(P.K))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-register"]],decls:48,vars:40,consts:[[1,"form-wrapper"],[1,"form-container"],[1,"sign-up-title"],[3,"formGroup","ngSubmit"],[1,"form-inner-container"],[1,"form-block"],[1,"form-group"],["for","name",1,"form-label"],["id","name","type","text","placeholder","Your name...","formControlName","name","pInputText","",1,"form-input",3,"ngClass"],["class","p-error error-text",4,"ngIf"],["for","surname",1,"form-label"],["id","surname","type","text","placeholder","Your surname...","formControlName","surname","pInputText","",1,"form-input",3,"ngClass"],["for","email",1,"form-label"],["id","email","type","email","placeholder","Your email...","formControlName","email","pInputText","",1,"form-input",3,"ngClass"],["id","btn-back-large","pButton","","pRipple","","type","button","label","Back",1,"p-button-outlined","p-button-warning","back-btn","btn",3,"routerLink"],["for","age",1,"form-label"],["id","age","type","number","placeholder","Your age...","formControlName","age","max","100","min","1","pInputText","",1,"form-input",3,"ngClass"],["for","password",1,"form-label"],["id","password","type","password","placeholder","Your password...","formControlName","password","pInputText","",1,"form-input",3,"ngClass"],["for","repeatPassword",1,"form-label"],["id","repeatPassword","type","password","placeholder","Repeat Your password","formControlName","repeatPassword","pInputText","",1,"form-input",3,"ngClass"],["id","btn-signup-large","type","submit","pButton","","pRipple","","label","Sign up",1,"p-button-warning","sign-up-btn","btn"],[1,"btn-container"],["pButton","","pRipple","","type","button","label","Back",1,"p-button-outlined","p-button-warning","back-btn","btn",3,"routerLink"],["type","submit","pButton","","pRipple","","label","Sign up",1,"p-button-warning","sign-up-btn","btn"],[1,"p-error","error-text"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Sign Up"),e.qZA(),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),e._uU(9," Name "),e.qZA(),e._UZ(10,"input",8),e.YNc(11,E,2,0,"small",9),e.qZA(),e.TgZ(12,"div",6)(13,"label",10),e._uU(14," Surname "),e.qZA(),e._UZ(15,"input",11),e.YNc(16,R,2,0,"small",9),e.qZA(),e.TgZ(17,"div",6)(18,"label",12),e._uU(19," Email "),e.qZA(),e._UZ(20,"input",13),e.YNc(21,B,2,0,"small",9),e.YNc(22,F,2,0,"small",9),e.qZA(),e._UZ(23,"button",14),e.qZA(),e.TgZ(24,"div",5)(25,"div",6)(26,"label",15),e._uU(27," Age "),e.qZA(),e._UZ(28,"input",16),e.YNc(29,j,2,0,"small",9),e.YNc(30,W,2,0,"small",9),e.qZA(),e.TgZ(31,"div",6)(32,"label",17),e._uU(33," Password "),e.qZA(),e._UZ(34,"input",18),e.YNc(35,H,2,0,"small",9),e.YNc(36,z,2,0,"small",9),e.YNc(37,D,2,0,"small",9),e.qZA(),e.TgZ(38,"div",6)(39,"label",19),e._uU(40," Repeat-password "),e.qZA(),e._UZ(41,"input",20),e.YNc(42,G,2,0,"small",9),e.YNc(43,X,2,0,"small",9),e.qZA(),e._UZ(44,"button",21),e.TgZ(45,"div",22),e._UZ(46,"button",23)(47,"button",24),e.qZA()()()()()()),2&n){let i,l,a,m,U,q,k,y,I,A,J;e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngClass",e.WLB(20,g,t.form.controls.name.errors&&t.submitted,t.form.controls.name.errors&&t.submitted)),e.xp6(1),e.Q6J("ngIf",(null==(i=t.form.get("name"))?null:i.hasError("required"))&&t.submitted),e.xp6(4),e.Q6J("ngClass",e.WLB(23,g,t.form.controls.surname.errors&&t.submitted,t.form.controls.surname.errors&&t.submitted)),e.xp6(1),e.Q6J("ngIf",(null==(l=t.form.get("surname"))?null:l.hasError("required"))&&t.submitted),e.xp6(4),e.Q6J("ngClass",e.WLB(26,g,t.form.controls.email.errors&&t.submitted,t.form.controls.email.errors&&t.submitted)),e.xp6(1),e.Q6J("ngIf",(null==(a=t.form.get("email"))?null:a.hasError("required"))&&t.submitted),e.xp6(1),e.Q6J("ngIf",(null==(m=t.form.get("email"))?null:m.hasError("email"))&&t.submitted),e.xp6(1),e.Q6J("routerLink",e.DdM(29,T)),e.xp6(5),e.Q6J("ngClass",e.WLB(30,g,t.form.controls.age.errors&&t.submitted,t.form.controls.age.errors&&t.submitted)),e.xp6(1),e.Q6J("ngIf",(null==(U=t.form.get("age"))?null:U.hasError("required"))&&t.submitted),e.xp6(1),e.Q6J("ngIf",(null==(q=t.form.get("age"))?null:q.hasError("min"))&&t.submitted),e.xp6(4),e.Q6J("ngClass",e.WLB(33,g,t.form.controls.password.errors&&t.submitted,t.form.controls.password.errors&&t.submitted)),e.xp6(1),e.Q6J("ngIf",(null==(k=t.form.get("password"))?null:k.hasError("required"))&&t.submitted),e.xp6(1),e.Q6J("ngIf",(null==(y=t.form.get("password"))?null:y.hasError("minlength"))&&t.submitted),e.xp6(1),e.Q6J("ngIf",(null==(I=t.form.get("password"))?null:I.hasError("maxlength"))&&t.submitted),e.xp6(4),e.Q6J("ngClass",e.WLB(36,g,t.form.controls.password.errors&&t.submitted||t.didntMatch,t.form.controls.password.errors&&t.submitted||t.didntMatch)),e.xp6(1),e.Q6J("ngIf",(null==(A=t.form.get("repeatPassword"))?null:A.hasError("required"))&&t.submitted),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.didntMatch&&!(null!=(J=t.form.get("repeatPassword"))&&J.hasError("required"))),e.xp6(3),e.Q6J("routerLink",e.DdM(39,T))}},dependencies:[f.mk,f.O5,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.qQ,o.Fd,p.rH,o.sg,o.u,b.o,_.Hq,C.H],styles:["[_nghost-%COMP%]     .p-element.p-ripple.p-button-warning.p-button.p-component{background-color:#f59e0b}[_nghost-%COMP%]     .p-element.p-ripple.p-button-warning.p-button.p-component:hover{background-color:#d97706}[_nghost-%COMP%]     .p-element.p-ripple.p-button-warning.p-button.p-component:active{background-color:#b45309}[_nghost-%COMP%]     .p-element.p-ripple.p-button-success.p-button.p-component{color:#e8e5e5;background-color:#22c55e}[_nghost-%COMP%]     .p-element.p-ripple.p-button-success.p-button.p-component:hover{background-color:#16a34a}[_nghost-%COMP%]     .p-element.p-ripple.p-button-success.p-button.p-component:active{background-color:#15803d}[_nghost-%COMP%]     .p-element.p-ripple.p-button-outlined.p-button-warning.back-btn.p-button.p-component{background-color:transparent;color:#f59e0b}.form-wrapper[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;justify-content:center;align-items:center}.form-container[_ngcontent-%COMP%]{width:60%;margin:0 auto;padding:10% 7% 7%}.sign-up-title[_ngcontent-%COMP%]{font-size:24px;text-align:center;color:#f59e0b}.form-inner-container[_ngcontent-%COMP%]{width:100%;padding:10px;display:flex;justify-content:center;align-items:center;gap:25px 15px}.form-group[_ngcontent-%COMP%]{width:100%;margin:15px;display:flex;flex-direction:column;gap:10px}.form-label[_ngcontent-%COMP%]{font-size:16px;color:#e8e5e5}.form-input[_ngcontent-%COMP%]{width:100%}.error-text[_ngcontent-%COMP%]{text-align:center}.form-block[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;justify-content:center;align-items:center}.btn[_ngcontent-%COMP%]{margin:15px 0}.back-btn[_ngcontent-%COMP%]{align-self:flex-start}.sign-up-btn[_ngcontent-%COMP%]{align-self:flex-end}[_nghost-%COMP%]     span.p-button-label{font-size:16px}.btn-container[_ngcontent-%COMP%]{width:100%;margin:40px 0;display:none;justify-content:space-between;align-items:center}@media (max-width: 650px){.form-wrapper[_ngcontent-%COMP%]{height:100%}.form-container[_ngcontent-%COMP%]{padding:0}.form-inner-container[_ngcontent-%COMP%]{flex-direction:column;gap:0}.form-block[_ngcontent-%COMP%]{width:100%}.btn-container[_ngcontent-%COMP%]{display:flex}#btn-back-large[_ngcontent-%COMP%], #btn-signup-large[_ngcontent-%COMP%]{display:none}}"]});const K=[{path:"login",component:u},{path:"register",component:h},{path:"",component:u,pathMatch:"full"}];class c{}c.\u0275fac=function(n){return new(n||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[p.Bz.forChild(K),p.Bz]});class d{}d.\u0275fac=function(n){return new(n||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[f.ez,o.u5,c,o.UX,b.j,_.hJ,C.T]})}}]);