"use strict";(self.webpackChunkCinema_Page=self.webpackChunkCinema_Page||[]).push([[65],{65:(Ke,K,f)=>{f.r(K),f.d(K,{MoviesModule:()=>E});var A,m=f(6895),b=f(3841),D=f(5698),t=f(8256),V=f(8374),Y=f(1443),ee=f(8499),I={Linear:{None:function(i){return i}},Quadratic:{In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}},Cubic:{In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}},Quartic:{In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}},Quintic:{In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}},Sinusoidal:{In:function(i){return 1-Math.cos(i*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return.5*(1-Math.cos(Math.PI*i))}},Exponential:{In:function(i){return 0===i?0:Math.pow(1024,i-1)},Out:function(i){return 1===i?1:1-Math.pow(2,-10*i)},InOut:function(i){return 0===i?0:1===i?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(2-Math.pow(2,-10*(i-1)))}},Circular:{In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}},Elastic:{In:function(i){return 0===i?0:1===i?1:-Math.pow(2,10*(i-1))*Math.sin(5*(i-1.1)*Math.PI)},Out:function(i){return 0===i?0:1===i?1:Math.pow(2,-10*i)*Math.sin(5*(i-.1)*Math.PI)+1},InOut:function(i){return 0===i?0:1===i?1:(i*=2)<1?-.5*Math.pow(2,10*(i-1))*Math.sin(5*(i-1.1)*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin(5*(i-1.1)*Math.PI)+1}},Back:{In:function(i){var n=1.70158;return i*i*((n+1)*i-n)},Out:function(i){var n=1.70158;return--i*i*((n+1)*i+n)+1},InOut:function(i){var n=2.5949095;return(i*=2)<1?i*i*((n+1)*i-n)*.5:.5*((i-=2)*i*((n+1)*i+n)+2)}},Bounce:{In:function(i){return 1-I.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?.5*I.Bounce.In(2*i):.5*I.Bounce.Out(2*i-1)+.5}}};A=typeof self>"u"&&typeof process<"u"&&process.hrtime?function(){var i=process.hrtime();return 1e3*i[0]+i[1]/1e6}:typeof self<"u"&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};var i,T=A,te=function(){function i(){this._tweens={},this._tweensAddedDuringUpdate={}}return i.prototype.getAll=function(){var n=this;return Object.keys(this._tweens).map(function(e){return n._tweens[e]})},i.prototype.removeAll=function(){this._tweens={}},i.prototype.add=function(n){this._tweens[n.getId()]=n,this._tweensAddedDuringUpdate[n.getId()]=n},i.prototype.remove=function(n){delete this._tweens[n.getId()],delete this._tweensAddedDuringUpdate[n.getId()]},i.prototype.update=function(n,e){void 0===n&&(n=T()),void 0===e&&(e=!1);var s=Object.keys(this._tweens);if(0===s.length)return!1;for(;s.length>0;){this._tweensAddedDuringUpdate={};for(var o=0;o<s.length;o++){var r=this._tweens[s[o]];r&&!1===r.update(n,!e)&&!e&&delete this._tweens[s[o]]}s=Object.keys(this._tweensAddedDuringUpdate)}return!0},i}(),k={Linear:function(i,n){var e=i.length-1,s=e*n,o=Math.floor(s),r=k.Utils.Linear;return n<0?r(i[0],i[1],s):n>1?r(i[e],i[e-1],e-s):r(i[o],i[o+1>e?e:o+1],s-o)},Bezier:function(i,n){for(var e=0,s=i.length-1,o=Math.pow,r=k.Utils.Bernstein,a=0;a<=s;a++)e+=o(1-n,s-a)*o(n,a)*i[a]*r(s,a);return e},CatmullRom:function(i,n){var e=i.length-1,s=e*n,o=Math.floor(s),r=k.Utils.CatmullRom;return i[0]===i[e]?(n<0&&(o=Math.floor(s=e*(1+n))),r(i[(o-1+e)%e],i[o],i[(o+1)%e],i[(o+2)%e],s-o)):n<0?i[0]-(r(i[0],i[0],i[1],i[1],-s)-i[0]):n>1?i[e]-(r(i[e],i[e],i[e-1],i[e-1],s-e)-i[e]):r(i[o?o-1:0],i[o],i[e<o+1?e:o+1],i[e<o+2?e:o+2],s-o)},Utils:{Linear:function(i,n,e){return(n-i)*e+i},Bernstein:function(i,n){var e=k.Utils.Factorial;return e(i)/e(n)/e(i-n)},Factorial:(i=[1],function(n){var e=1;if(i[n])return i[n];for(var s=n;s>1;s--)e*=s;return i[n]=e,e}),CatmullRom:function(i,n,e,s,o){var r=.5*(e-i),a=.5*(s-n),l=o*o;return(2*n-2*e+r+a)*(o*l)+(-3*n+3*e-2*r-a)*l+r*o+n}}},j=function(){function i(){}return i.nextId=function(){return i._nextId++},i._nextId=0,i}(),ie=new te,ne=function(){function i(n,e){void 0===e&&(e=ie),this._object=n,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=I.Linear.None,this._interpolationFunction=k.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=j.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return i.prototype.getId=function(){return this._id},i.prototype.isPlaying=function(){return this._isPlaying},i.prototype.isPaused=function(){return this._isPaused},i.prototype.to=function(n,e){return this._valuesEnd=Object.create(n),void 0!==e&&(this._duration=e),this},i.prototype.duration=function(n){return this._duration=n,this},i.prototype.start=function(n){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var e in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==n?"string"==typeof n?T()+parseFloat(n):n:T(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},i.prototype._setupProperties=function(n,e,s,o){for(var r in s){var a=n[r],l=Array.isArray(a),h=l?"array":typeof a,c=!l&&Array.isArray(s[r]);if("undefined"!==h&&"function"!==h){if(c){var d=s[r];if(0===d.length)continue;d=d.map(this._handleRelativeValue.bind(this,a)),s[r]=[a].concat(d)}if("object"!==h&&!l||!a||c)typeof e[r]>"u"&&(e[r]=a),l||(e[r]*=1),o[r]=c?s[r].slice().reverse():e[r]||0;else{for(var u in e[r]=l?[]:{},a)e[r][u]=a[u];o[r]=l?[]:{},this._setupProperties(a,e[r],s[r],o[r])}}}},i.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},i.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},i.prototype.pause=function(n){return void 0===n&&(n=T()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=n,this._group&&this._group.remove(this)),this},i.prototype.resume=function(n){return void 0===n&&(n=T()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=n-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},i.prototype.stopChainedTweens=function(){for(var n=0,e=this._chainedTweens.length;n<e;n++)this._chainedTweens[n].stop();return this},i.prototype.group=function(n){return this._group=n,this},i.prototype.delay=function(n){return this._delayTime=n,this},i.prototype.repeat=function(n){return this._initialRepeat=n,this._repeat=n,this},i.prototype.repeatDelay=function(n){return this._repeatDelayTime=n,this},i.prototype.yoyo=function(n){return this._yoyo=n,this},i.prototype.easing=function(n){return this._easingFunction=n,this},i.prototype.interpolation=function(n){return this._interpolationFunction=n,this},i.prototype.chain=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return this._chainedTweens=n,this},i.prototype.onStart=function(n){return this._onStartCallback=n,this},i.prototype.onUpdate=function(n){return this._onUpdateCallback=n,this},i.prototype.onRepeat=function(n){return this._onRepeatCallback=n,this},i.prototype.onComplete=function(n){return this._onCompleteCallback=n,this},i.prototype.onStop=function(n){return this._onStopCallback=n,this},i.prototype.update=function(n,e){if(void 0===n&&(n=T()),void 0===e&&(e=!0),this._isPaused)return!0;var s,o;if(!this._goToEnd&&!this._isPlaying){if(n>this._startTime+this._duration)return!1;e&&this.start(n)}if(this._goToEnd=!1,n<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),o=(n-this._startTime)/this._duration;var a=this._easingFunction(o=0===this._duration||o>1?1:o);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,o),1===o){if(this._repeat>0){for(s in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)!this._yoyo&&"string"==typeof this._valuesEnd[s]&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime=void 0!==this._repeatDelayTime?n+this._repeatDelayTime:n+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var l=0,h=this._chainedTweens.length;l<h;l++)this._chainedTweens[l].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},i.prototype._updateProperties=function(n,e,s,o){for(var r in s)if(void 0!==e[r]){var a=e[r]||0,l=s[r],h=Array.isArray(n[r]),c=Array.isArray(l);!h&&c?n[r]=this._interpolationFunction(l,o):"object"==typeof l&&l?this._updateProperties(n[r],a,l,o):"number"==typeof(l=this._handleRelativeValue(a,l))&&(n[r]=a+(l-a)*o)}},i.prototype._handleRelativeValue=function(n,e){return"string"!=typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?n+parseFloat(e):parseFloat(e)},i.prototype._swapEndStartRepeatValues=function(n){var e=this._valuesStartRepeat[n],s=this._valuesEnd[n];this._valuesStartRepeat[n]="string"==typeof s?this._valuesStartRepeat[n]+parseFloat(s):this._valuesEnd[n],this._valuesEnd[n]=e},i}(),C=ie;C.getAll.bind(C),C.removeAll.bind(C),C.add.bind(C),C.remove.bind(C),C.update.bind(C);const ue=["header"],fe=["container"],me=["content"],ge=["invisiblePadding"],ve=["*"];function _e(){return{checkResizeInterval:1e3,modifyOverflowStyleOfParentScroll:!0,resizeBypassRefreshThreshold:5,scrollAnimationTime:750,scrollDebounceTime:0,scrollThrottlingTime:0,stripedTable:!1}}let we=(()=>{class i{constructor(e,s,o,r,a,l){this.element=e,this.renderer=s,this.zone=o,this.changeDetectorRef=r,this.window=window,this.executeRefreshOutsideAngularZone=!1,this._enableUnequalChildrenSizes=!1,this.RTL=!1,this.useMarginInsteadOfTranslate=!1,this.ssrViewportWidth=1920,this.ssrViewportHeight=1080,this._items=[],this.compareItems=(h,c)=>h===c,this.vsUpdate=new t.vpe,this.vsChange=new t.vpe,this.vsStart=new t.vpe,this.vsEnd=new t.vpe,this.calculatedScrollbarWidth=0,this.calculatedScrollbarHeight=0,this.padding=0,this.previousViewPort={},this.cachedPageSize=0,this.previousScrollNumberElements=0,this.isAngularUniversalSSR=(0,m.PM)(a),this.checkResizeInterval=l.checkResizeInterval,this.modifyOverflowStyleOfParentScroll=l.modifyOverflowStyleOfParentScroll,this.resizeBypassRefreshThreshold=l.resizeBypassRefreshThreshold,this.scrollAnimationTime=l.scrollAnimationTime,this.scrollDebounceTime=l.scrollDebounceTime,this.scrollThrottlingTime=l.scrollThrottlingTime,this.scrollbarHeight=l.scrollbarHeight,this.scrollbarWidth=l.scrollbarWidth,this.stripedTable=l.stripedTable,this.horizontal=!1,this.resetWrapGroupDimensions()}get viewPortInfo(){let e=this.previousViewPort||{};return{startIndex:e.startIndex||0,endIndex:e.endIndex||0,scrollStartPosition:e.scrollStartPosition||0,scrollEndPosition:e.scrollEndPosition||0,maxScrollPosition:e.maxScrollPosition||0,startIndexWithBuffer:e.startIndexWithBuffer||0,endIndexWithBuffer:e.endIndexWithBuffer||0}}get enableUnequalChildrenSizes(){return this._enableUnequalChildrenSizes}set enableUnequalChildrenSizes(e){this._enableUnequalChildrenSizes!==e&&(this._enableUnequalChildrenSizes=e,this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0)}get bufferAmount(){return"number"==typeof this._bufferAmount&&this._bufferAmount>=0?this._bufferAmount:this.enableUnequalChildrenSizes?5:0}set bufferAmount(e){this._bufferAmount=e}get scrollThrottlingTime(){return this._scrollThrottlingTime}set scrollThrottlingTime(e){this._scrollThrottlingTime=e,this.updateOnScrollFunction()}get scrollDebounceTime(){return this._scrollDebounceTime}set scrollDebounceTime(e){this._scrollDebounceTime=e,this.updateOnScrollFunction()}updateOnScrollFunction(){this.onScroll=this.scrollDebounceTime?this.debounce(()=>{this.refresh_internal(!1)},this.scrollDebounceTime):this.scrollThrottlingTime?this.throttleTrailing(()=>{this.refresh_internal(!1)},this.scrollThrottlingTime):()=>{this.refresh_internal(!1)}}get checkResizeInterval(){return this._checkResizeInterval}set checkResizeInterval(e){this._checkResizeInterval!==e&&(this._checkResizeInterval=e,this.addScrollEventHandlers())}get items(){return this._items}set items(e){e!==this._items&&(this._items=e||[],this.refresh_internal(!0))}get horizontal(){return this._horizontal}set horizontal(e){this._horizontal=e,this.updateDirection()}revertParentOverscroll(){const e=this.getScrollElement();e&&this.oldParentScrollOverflow&&(e.style["overflow-y"]=this.oldParentScrollOverflow.y,e.style["overflow-x"]=this.oldParentScrollOverflow.x),this.oldParentScrollOverflow=void 0}get parentScroll(){return this._parentScroll}set parentScroll(e){if(this._parentScroll===e)return;this.revertParentOverscroll(),this._parentScroll=e,this.addScrollEventHandlers();const s=this.getScrollElement();this.modifyOverflowStyleOfParentScroll&&s!==this.element.nativeElement&&(this.oldParentScrollOverflow={x:s.style["overflow-x"],y:s.style["overflow-y"]},s.style["overflow-y"]=this.horizontal?"visible":"auto",s.style["overflow-x"]=this.horizontal?"auto":"visible")}ngOnInit(){this.addScrollEventHandlers()}ngOnDestroy(){this.removeScrollEventHandlers(),this.revertParentOverscroll()}ngOnChanges(e){let s=this.cachedItemsLength!==this.items.length;this.cachedItemsLength=this.items.length,this.refresh_internal(s||!e.items||!e.items.previousValue||0===e.items.previousValue.length)}ngDoCheck(){if(this.cachedItemsLength!==this.items.length)return this.cachedItemsLength=this.items.length,void this.refresh_internal(!0);if(this.previousViewPort&&this.viewPortItems&&this.viewPortItems.length>0){let e=!1;for(let s=0;s<this.viewPortItems.length;++s)if(!this.compareItems(this.items[this.previousViewPort.startIndexWithBuffer+s],this.viewPortItems[s])){e=!0;break}e&&this.refresh_internal(!0)}}refresh(){this.refresh_internal(!0)}invalidateAllCachedMeasurements(){this.wrapGroupDimensions={maxChildSizePerWrapGroup:[],numberOfKnownWrapGroupChildSizes:0,sumOfKnownWrapGroupChildWidths:0,sumOfKnownWrapGroupChildHeights:0},this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0,this.refresh_internal(!1)}invalidateCachedMeasurementForItem(e){if(this.enableUnequalChildrenSizes){let s=this.items&&this.items.indexOf(e);s>=0&&this.invalidateCachedMeasurementAtIndex(s)}else this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0;this.refresh_internal(!1)}invalidateCachedMeasurementAtIndex(e){if(this.enableUnequalChildrenSizes){let s=this.wrapGroupDimensions.maxChildSizePerWrapGroup[e];s&&(this.wrapGroupDimensions.maxChildSizePerWrapGroup[e]=void 0,--this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths-=s.childWidth||0,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights-=s.childHeight||0)}else this.minMeasuredChildWidth=void 0,this.minMeasuredChildHeight=void 0;this.refresh_internal(!1)}scrollInto(e,s=!0,o=0,r,a){let l=this.items.indexOf(e);-1!==l&&this.scrollToIndex(l,s,o,r,a)}scrollToIndex(e,s=!0,o=0,r,a){let l=5,h=()=>{if(--l,l<=0)return void(a&&a());let c=this.calculateDimensions(),d=Math.min(Math.max(e,0),c.itemCount-1);this.previousViewPort.startIndex!==d?this.scrollToIndex_internal(e,s,o,0,h):a&&a()};this.scrollToIndex_internal(e,s,o,r,h)}scrollToIndex_internal(e,s=!0,o=0,r,a){r=void 0===r?this.scrollAnimationTime:r;let l=this.calculateDimensions(),h=this.calculatePadding(e,l)+o;s||(h-=l.wrapGroupsPerPage*l[this._childScrollDim]),this.scrollToPosition(h,r,a)}scrollToPosition(e,s,o){e+=this.getElementsOffset(),s=void 0===s?this.scrollAnimationTime:s;let a,r=this.getScrollElement();if(this.currentTween&&(this.currentTween.stop(),this.currentTween=void 0),!s)return this.renderer.setProperty(r,this._scrollType,e),void this.refresh_internal(!1,o);const l={scrollPosition:r[this._scrollType]};let h=new ne(l).to({scrollPosition:e},s).easing(I.Quadratic.Out).onUpdate(d=>{isNaN(d.scrollPosition)||(this.renderer.setProperty(r,this._scrollType,d.scrollPosition),this.refresh_internal(!1))}).onStop(()=>{cancelAnimationFrame(a)}).start();const c=d=>{if(h.isPlaying()){if(h.update(d),l.scrollPosition===e)return void this.refresh_internal(!1,o);this.zone.runOutsideAngular(()=>{a=requestAnimationFrame(c)})}};c(),this.currentTween=h}getElementSize(e){let s=e.getBoundingClientRect(),o=getComputedStyle(e),r=parseInt(o["margin-top"],10)||0,a=parseInt(o["margin-bottom"],10)||0,l=parseInt(o["margin-left"],10)||0,h=parseInt(o["margin-right"],10)||0;return{top:s.top+r,bottom:s.bottom+a,left:s.left+l,right:s.right+h,width:s.width+l+h,height:s.height+r+a}}checkScrollElementResized(){let s,e=this.getElementSize(this.getScrollElement());if(this.previousScrollBoundingRect){let o=Math.abs(e.width-this.previousScrollBoundingRect.width),r=Math.abs(e.height-this.previousScrollBoundingRect.height);s=o>this.resizeBypassRefreshThreshold||r>this.resizeBypassRefreshThreshold}else s=!0;s&&(this.previousScrollBoundingRect=e,e.width>0&&e.height>0&&this.refresh_internal(!1))}updateDirection(){this.horizontal?(this._childScrollDim="childWidth",this._invisiblePaddingProperty="scaleX",this._marginDir="margin-left",this._offsetType="offsetLeft",this._pageOffsetType="pageXOffset",this._scrollType="scrollLeft",this._translateDir="translateX"):(this._childScrollDim="childHeight",this._invisiblePaddingProperty="scaleY",this._marginDir="margin-top",this._offsetType="offsetTop",this._pageOffsetType="pageYOffset",this._scrollType="scrollTop",this._translateDir="translateY")}debounce(e,s){const o=this.throttleTrailing(e,s),r=function(){o.cancel(),o.apply(this,arguments)};return r.cancel=function(){o.cancel()},r}throttleTrailing(e,s){let o,r=arguments;const a=function(){const l=this;r=arguments,!o&&(s<=0?e.apply(l,r):o=setTimeout(function(){o=void 0,e.apply(l,r)},s))};return a.cancel=function(){o&&(clearTimeout(o),o=void 0)},a}refresh_internal(e,s,o=2){if(e&&this.previousViewPort&&this.previousViewPort.scrollStartPosition>0){let r=this.previousViewPort,a=this.viewPortItems,l=s;s=()=>{let h=this.previousViewPort.scrollLength-r.scrollLength;if(h>0&&this.viewPortItems){let c=a[0],d=this.items.findIndex(u=>this.compareItems(c,u));if(d>this.previousViewPort.startIndexWithBuffer){let u=!1;for(let p=1;p<this.viewPortItems.length;++p)if(!this.compareItems(this.items[d+p],a[p])){u=!0;break}if(!u)return void this.scrollToPosition(this.previousViewPort.scrollStartPosition+h,0,l)}}l&&l()}}this.zone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e&&this.resetWrapGroupDimensions();let r=this.calculateViewport(),a=e||r.startIndex!==this.previousViewPort.startIndex,l=e||r.endIndex!==this.previousViewPort.endIndex,h=r.scrollLength!==this.previousViewPort.scrollLength,c=r.padding!==this.previousViewPort.padding,d=r.scrollStartPosition!==this.previousViewPort.scrollStartPosition||r.scrollEndPosition!==this.previousViewPort.scrollEndPosition||r.maxScrollPosition!==this.previousViewPort.maxScrollPosition;if(this.previousViewPort=r,h&&(this.renderer.setStyle(this.invisiblePaddingElementRef.nativeElement,"transform",`${this._invisiblePaddingProperty}(${r.scrollLength})`),this.renderer.setStyle(this.invisiblePaddingElementRef.nativeElement,"webkitTransform",`${this._invisiblePaddingProperty}(${r.scrollLength})`)),c&&(this.useMarginInsteadOfTranslate?this.renderer.setStyle(this.contentElementRef.nativeElement,this._marginDir,`${r.padding}px`):(this.renderer.setStyle(this.contentElementRef.nativeElement,"transform",`${this._translateDir}(${r.padding}px)`),this.renderer.setStyle(this.contentElementRef.nativeElement,"webkitTransform",`${this._translateDir}(${r.padding}px)`))),this.headerElementRef){let p=this.getScrollElement()[this._scrollType],v=this.getElementsOffset(),M=Math.max(p-r.padding-v+this.headerElementRef.nativeElement.clientHeight,0);this.renderer.setStyle(this.headerElementRef.nativeElement,"transform",`${this._translateDir}(${M}px)`),this.renderer.setStyle(this.headerElementRef.nativeElement,"webkitTransform",`${this._translateDir}(${M}px)`)}const u=a||l?{startIndex:r.startIndex,endIndex:r.endIndex,scrollStartPosition:r.scrollStartPosition,scrollEndPosition:r.scrollEndPosition,startIndexWithBuffer:r.startIndexWithBuffer,endIndexWithBuffer:r.endIndexWithBuffer,maxScrollPosition:r.maxScrollPosition}:void 0;if(a||l||d){const p=()=>{this.viewPortItems=r.startIndexWithBuffer>=0&&r.endIndexWithBuffer>=0?this.items.slice(r.startIndexWithBuffer,r.endIndexWithBuffer+1):[],this.vsUpdate.emit(this.viewPortItems),a&&this.vsStart.emit(u),l&&this.vsEnd.emit(u),(a||l)&&(this.changeDetectorRef.markForCheck(),this.vsChange.emit(u)),o>0?this.refresh_internal(!1,s,o-1):s&&s()};this.executeRefreshOutsideAngularZone?p():this.zone.run(p)}else{if(o>0&&(h||c))return void this.refresh_internal(!1,s,o-1);s&&s()}})})}getScrollElement(){return this.parentScroll instanceof Window?document.scrollingElement||document.documentElement||document.body:this.parentScroll||this.element.nativeElement}addScrollEventHandlers(){if(this.isAngularUniversalSSR)return;let e=this.getScrollElement();this.removeScrollEventHandlers(),this.zone.runOutsideAngular(()=>{this.parentScroll instanceof Window?(this.disposeScrollHandler=this.renderer.listen("window","scroll",this.onScroll),this.disposeResizeHandler=this.renderer.listen("window","resize",this.onScroll)):(this.disposeScrollHandler=this.renderer.listen(e,"scroll",this.onScroll),this._checkResizeInterval>0&&(this.checkScrollElementResizedTimer=setInterval(()=>{this.checkScrollElementResized()},this._checkResizeInterval)))})}removeScrollEventHandlers(){this.checkScrollElementResizedTimer&&clearInterval(this.checkScrollElementResizedTimer),this.disposeScrollHandler&&(this.disposeScrollHandler(),this.disposeScrollHandler=void 0),this.disposeResizeHandler&&(this.disposeResizeHandler(),this.disposeResizeHandler=void 0)}getElementsOffset(){if(this.isAngularUniversalSSR)return 0;let e=0;if(this.containerElementRef&&this.containerElementRef.nativeElement&&(e+=this.containerElementRef.nativeElement[this._offsetType]),this.parentScroll){let s=this.getScrollElement(),o=this.getElementSize(this.element.nativeElement),r=this.getElementSize(s);e+=this.horizontal?o.left-r.left:o.top-r.top,this.parentScroll instanceof Window||(e+=s[this._scrollType])}return e}countItemsPerWrapGroup(){if(this.isAngularUniversalSSR)return Math.round(this.horizontal?this.ssrViewportHeight/this.ssrChildHeight:this.ssrViewportWidth/this.ssrChildWidth);let e=this.horizontal?"offsetLeft":"offsetTop",s=(this.containerElementRef&&this.containerElementRef.nativeElement||this.contentElementRef.nativeElement).children,o=s?s.length:0;if(0===o)return 1;let r=s[0][e],a=1;for(;a<o&&r===s[a][e];)++a;return a}getScrollStartPosition(){let e;return this.parentScroll instanceof Window&&(e=window[this._pageOffsetType]),e||this.getScrollElement()[this._scrollType]||0}resetWrapGroupDimensions(){const e=this.wrapGroupDimensions;if(this.invalidateAllCachedMeasurements(),!this.enableUnequalChildrenSizes||!e||0===e.numberOfKnownWrapGroupChildSizes)return;const s=this.countItemsPerWrapGroup();for(let o=0;o<e.maxChildSizePerWrapGroup.length;++o){const r=e.maxChildSizePerWrapGroup[o];if(!r||!r.items||!r.items.length)continue;if(r.items.length!==s)return;let a=!1,l=s*o;for(let h=0;h<s;++h)if(!this.compareItems(r.items[h],this.items[l+h])){a=!0;break}a||(++this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths+=r.childWidth||0,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights+=r.childHeight||0,this.wrapGroupDimensions.maxChildSizePerWrapGroup[o]=r)}}calculateDimensions(){let e=this.getScrollElement();this.calculatedScrollbarHeight=Math.max(Math.min(e.offsetHeight-e.clientHeight,25),this.calculatedScrollbarHeight),this.calculatedScrollbarWidth=Math.max(Math.min(e.offsetWidth-e.clientWidth,25),this.calculatedScrollbarWidth);let h,c,d,o=e.offsetWidth-(this.scrollbarWidth||this.calculatedScrollbarWidth||(this.horizontal?0:25)),r=e.offsetHeight-(this.scrollbarHeight||this.calculatedScrollbarHeight||(this.horizontal?25:0)),a=this.containerElementRef&&this.containerElementRef.nativeElement||this.contentElementRef.nativeElement,l=this.countItemsPerWrapGroup();if(this.isAngularUniversalSSR){o=this.ssrViewportWidth,r=this.ssrViewportHeight,c=this.ssrChildWidth,d=this.ssrChildHeight;let _=Math.max(Math.ceil(o/c),1),g=Math.max(Math.ceil(r/d),1);h=this.horizontal?_:g}else if(this.enableUnequalChildrenSizes){let _=e[this._scrollType]-(this.previousViewPort?this.previousViewPort.padding:0),g=this.previousViewPort.startIndexWithBuffer||0,O=Math.ceil(g/l),S=0,z=0,F=0,Z=0;h=0;for(let X=0;X<a.children.length;++X){++g;let re=this.getElementSize(a.children[X]);if(S=Math.max(S,re.width),z=Math.max(z,re.height),g%l==0){let $=this.wrapGroupDimensions.maxChildSizePerWrapGroup[O];$&&(--this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes,this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths-=$.childWidth||0,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights-=$.childHeight||0),++this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes;const $e=this.items.slice(g-l,g);if(this.wrapGroupDimensions.maxChildSizePerWrapGroup[O]={childWidth:S,childHeight:z,items:$e},this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths+=S,this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights+=z,this.horizontal){let x=Math.min(S,Math.max(o-F,0));if(_>0){let q=Math.min(_,x);x-=q,_-=q}F+=x,x>0&&o>=F&&++h}else{let x=Math.min(z,Math.max(r-Z,0));if(_>0){let q=Math.min(_,x);x-=q,_-=q}Z+=x,x>0&&r>=Z&&++h}++O,S=0,z=0}}c=this.childWidth||this.wrapGroupDimensions.sumOfKnownWrapGroupChildWidths/this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes||o,d=this.childHeight||this.wrapGroupDimensions.sumOfKnownWrapGroupChildHeights/this.wrapGroupDimensions.numberOfKnownWrapGroupChildSizes||r,this.horizontal?o>F&&(h+=Math.ceil((o-F)/c)):r>Z&&(h+=Math.ceil((r-Z)/d))}else{if(a.children.length>0){(!this.childWidth||!this.childHeight)&&(!this.minMeasuredChildWidth&&o>0&&(this.minMeasuredChildWidth=o),!this.minMeasuredChildHeight&&r>0&&(this.minMeasuredChildHeight=r));let S=this.getElementSize(a.children[0]);this.minMeasuredChildWidth=Math.min(this.minMeasuredChildWidth,S.width),this.minMeasuredChildHeight=Math.min(this.minMeasuredChildHeight,S.height)}c=this.childWidth||this.minMeasuredChildWidth||o,d=this.childHeight||this.minMeasuredChildHeight||r;let _=Math.max(Math.ceil(o/c),1),g=Math.max(Math.ceil(r/d),1);h=this.horizontal?_:g}let u=this.items.length,p=l*h,v=u/p,M=Math.ceil(u/l),P=0,y=this.horizontal?c:d;if(this.enableUnequalChildrenSizes){let _=0;for(let g=0;g<M;++g){let O=this.wrapGroupDimensions.maxChildSizePerWrapGroup[g]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[g][this._childScrollDim];O?P+=O:++_}P+=Math.round(_*y)}else P=M*y;this.headerElementRef&&(P+=this.headerElementRef.nativeElement.clientHeight);let L=this.horizontal?o:r;return{childHeight:d,childWidth:c,itemCount:u,itemsPerPage:p,itemsPerWrapGroup:l,maxScrollPosition:Math.max(P-L,0),pageCount_fractional:v,scrollLength:P,viewportLength:L,wrapGroupsPerPage:h}}calculatePadding(e,s){if(0===s.itemCount)return 0;let o=s[this._childScrollDim],r=Math.floor(e/s.itemsPerWrapGroup)||0;if(!this.enableUnequalChildrenSizes)return o*r;let a=0,l=0;for(let h=0;h<r;++h){let c=this.wrapGroupDimensions.maxChildSizePerWrapGroup[h]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[h][this._childScrollDim];c?l+=c:++a}return l+=Math.round(a*o),l}calculatePageInfo(e,s){let o=0;if(this.enableUnequalChildrenSizes){const v=Math.ceil(s.itemCount/s.itemsPerWrapGroup);let M=0,P=s[this._childScrollDim];for(let y=0;y<v;++y){if(M+=this.wrapGroupDimensions.maxChildSizePerWrapGroup[y]&&this.wrapGroupDimensions.maxChildSizePerWrapGroup[y][this._childScrollDim]||P,e<M){o=y/v;break}}}else o=e/s.scrollLength;let r=Math.min(Math.max(o*s.pageCount_fractional,0),s.pageCount_fractional)*s.itemsPerPage,a=s.itemCount-s.itemsPerPage-1,l=Math.min(Math.floor(r),a);if(l-=l%s.itemsPerWrapGroup,this.stripedTable){let v=2*s.itemsPerWrapGroup;l%v!=0&&(l=Math.max(l-l%v,0))}let h=Math.ceil(r)+s.itemsPerPage-1,c=(h+1)%s.itemsPerWrapGroup;c>0&&(h+=s.itemsPerWrapGroup-c),isNaN(l)&&(l=0),isNaN(h)&&(h=0),l=Math.min(Math.max(l,0),s.itemCount-1),h=Math.min(Math.max(h,0),s.itemCount-1);let d=this.bufferAmount*s.itemsPerWrapGroup;return{startIndex:l,endIndex:h,startIndexWithBuffer:Math.min(Math.max(l-d,0),s.itemCount-1),endIndexWithBuffer:Math.min(Math.max(h+d,0),s.itemCount-1),scrollStartPosition:e,scrollEndPosition:e+s.viewportLength,maxScrollPosition:s.maxScrollPosition}}calculateViewport(){let e=this.calculateDimensions(),s=this.getElementsOffset(),o=this.getScrollStartPosition();o>e.scrollLength+s&&!(this.parentScroll instanceof Window)?o=e.scrollLength:o-=s,o=Math.max(0,o);let r=this.calculatePageInfo(o,e),a=this.calculatePadding(r.startIndexWithBuffer,e),l=e.scrollLength;return{startIndex:r.startIndex,endIndex:r.endIndex,startIndexWithBuffer:r.startIndexWithBuffer,endIndexWithBuffer:r.endIndexWithBuffer,padding:Math.round(a),scrollLength:Math.round(l),scrollStartPosition:r.scrollStartPosition,scrollEndPosition:r.scrollEndPosition,maxScrollPosition:r.maxScrollPosition}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(t.Lbi),t.Y36("virtual-scroller-default-options",8))},i.\u0275cmp=t.Xpm({type:i,selectors:[["virtual-scroller"],["","virtualScroller",""]],contentQueries:function(e,s,o){if(1&e&&(t.Suo(o,ue,5,t.SBq),t.Suo(o,fe,5,t.SBq)),2&e){let r;t.iGM(r=t.CRH())&&(s.headerElementRef=r.first),t.iGM(r=t.CRH())&&(s.containerElementRef=r.first)}},viewQuery:function(e,s){if(1&e&&(t.Gf(me,7,t.SBq),t.Gf(ge,7,t.SBq)),2&e){let o;t.iGM(o=t.CRH())&&(s.contentElementRef=o.first),t.iGM(o=t.CRH())&&(s.invisiblePaddingElementRef=o.first)}},hostVars:8,hostBindings:function(e,s){2&e&&t.ekj("horizontal",s.horizontal)("vertical",!s.horizontal)("selfScroll",!s.parentScroll)("rtl",s.RTL)},inputs:{executeRefreshOutsideAngularZone:"executeRefreshOutsideAngularZone",enableUnequalChildrenSizes:"enableUnequalChildrenSizes",RTL:"RTL",useMarginInsteadOfTranslate:"useMarginInsteadOfTranslate",modifyOverflowStyleOfParentScroll:"modifyOverflowStyleOfParentScroll",stripedTable:"stripedTable",scrollbarWidth:"scrollbarWidth",scrollbarHeight:"scrollbarHeight",childWidth:"childWidth",childHeight:"childHeight",ssrChildWidth:"ssrChildWidth",ssrChildHeight:"ssrChildHeight",ssrViewportWidth:"ssrViewportWidth",ssrViewportHeight:"ssrViewportHeight",bufferAmount:"bufferAmount",scrollAnimationTime:"scrollAnimationTime",resizeBypassRefreshThreshold:"resizeBypassRefreshThreshold",scrollThrottlingTime:"scrollThrottlingTime",scrollDebounceTime:"scrollDebounceTime",checkResizeInterval:"checkResizeInterval",items:"items",compareItems:"compareItems",horizontal:"horizontal",parentScroll:"parentScroll"},outputs:{vsUpdate:"vsUpdate",vsChange:"vsChange",vsStart:"vsStart",vsEnd:"vsEnd"},exportAs:["virtualScroller"],features:[t.TTD],ngContentSelectors:ve,decls:5,vars:0,consts:[[1,"total-padding"],["invisiblePadding",""],[1,"scrollable-content"],["content",""]],template:function(e,s){1&e&&(t.F$t(),t._UZ(0,"div",0,1),t.TgZ(2,"div",2,3),t.Hsn(4),t.qZA())},styles:["[_nghost-%COMP%]{position:relative;display:block;-webkit-overflow-scrolling:touch}.horizontal.selfScroll[_nghost-%COMP%]{overflow-y:visible;overflow-x:auto}.horizontal.selfScroll.rtl[_nghost-%COMP%]{transform:scaleX(-1)}.vertical.selfScroll[_nghost-%COMP%]{overflow-y:auto;overflow-x:visible}.scrollable-content[_ngcontent-%COMP%]{top:0;left:0;width:100%;height:100%;max-width:100vw;max-height:100vh;position:absolute}.scrollable-content[_ngcontent-%COMP%]    >*{box-sizing:border-box}.horizontal[_nghost-%COMP%]{white-space:nowrap}.horizontal[_nghost-%COMP%]   .scrollable-content[_ngcontent-%COMP%]{display:flex}.horizontal[_nghost-%COMP%]   .scrollable-content[_ngcontent-%COMP%]    >*{flex-shrink:0;flex-grow:0;white-space:initial}.horizontal.rtl[_nghost-%COMP%]   .scrollable-content[_ngcontent-%COMP%]    >*{transform:scaleX(-1)}.total-padding[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;opacity:0}.horizontal[_nghost-%COMP%]   .total-padding[_ngcontent-%COMP%]{height:100%}"]}),i})(),be=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[{provide:"virtual-scroller-default-options",useFactory:_e}],imports:[m.ez]}),i})();const J=function(i,n){return[i,n]};function Ce(i,n){if(1&i&&t._UZ(0,"img",10),2&i){const e=t.oxw().$implicit,s=t.oxw();t.Q6J("src",e.imgUrl,t.LSH)("routerLink",t.WLB(2,J,"/movies/"+s.cinemaId,e.id))}}function Me(i,n){if(1&i&&t._UZ(0,"img",11),2&i){const e=t.oxw().$implicit;t.Q6J("src",e.imgUrl,t.LSH)}}function Se(i,n){if(1&i&&(t.TgZ(0,"p",12),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,s=t.oxw();t.Q6J("routerLink",t.WLB(2,J,"/movies/"+s.cinemaId,e.id)),t.xp6(1),t.hij(" ",e.name," ")}}function xe(i,n){if(1&i&&(t.TgZ(0,"p",13),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function Pe(i,n){if(1&i&&(t.TgZ(0,"div",4),t.YNc(1,Ce,1,5,"img",5),t.YNc(2,Me,1,1,"img",6),t.YNc(3,Se,2,5,"p",7),t.YNc(4,xe,2,1,"p",8),t.TgZ(5,"button",9),t._uU(6,"See Tickets "),t.qZA()()),2&i){const e=n.$implicit,s=t.oxw();t.xp6(1),t.Q6J("ngIf",!s.isMobile),t.xp6(1),t.Q6J("ngIf",s.isMobile),t.xp6(1),t.Q6J("ngIf",!s.isMobile),t.xp6(1),t.Q6J("ngIf",s.isMobile),t.xp6(1),t.Q6J("routerLink",t.WLB(5,J,"/movies/"+s.cinemaId,e.id))}}class B{constructor(n,e,s,o){this.http=n,this.route=e,this.router=s,this.toastMessage=o,this.allMovies=[],this.incomingMovies=[],this.virtualMovies=[],this.isMobile=window.innerWidth<=650,this.cinemaId="",this.page=1,this.moviesLimit=6,this.infiniteScrollDisabled=!0}ngOnInit(){this.followRouteParamsChanges()}followRouteParamsChanges(){this.route.params.subscribe(n=>{this.infiniteScrollDisabled=!0,this.page=1,this.cinemaId=n["cinema-id"],this.getMovies()})}getMovies(){this.http.getMovies(this.cinemaId,this.page.toString(),this.moviesLimit.toString()).pipe((0,D.q)(1)).subscribe({next:n=>{if(this.infiniteScrollDisabled=!1,this.incomingMovies=n,0===this.incomingMovies.length)return this.router.navigateByUrl("movies").then(),void this.toastMessage.somethingWentWrongMessage();this.allMovies=this.incomingMovies},error:()=>{this.toastMessage.somethingWentWrongMessage()}})}requestMoreMovies(){this.http.getMovies(this.cinemaId,this.page.toString(),this.moviesLimit.toString()).pipe((0,D.q)(1)).subscribe({next:n=>{this.incomingMovies=n,this.allMovies=this.allMovies.concat(this.incomingMovies)},error:()=>{this.toastMessage.somethingWentWrongMessage()}})}onScroll(){this.page++,this.requestMoreMovies(),this.incomingMovies=[]}}B.\u0275fac=function(n){return new(n||B)(t.Y36(V.a),t.Y36(b.gz),t.Y36(b.F0),t.Y36(Y.z))},B.\u0275cmp=t.Xpm({type:B,selectors:[["app-movies"]],decls:5,vars:6,consts:[[1,"movies-title"],["infiniteScroll","",3,"infiniteScrollContainer","infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollDisabled","scrolled"],["virtualScroller","",1,"movies-container",3,"items","vsUpdate"],["class","card",4,"ngFor","ngForOf"],[1,"card"],["alt","movie-img","class","movie-img",3,"src","routerLink",4,"ngIf"],["alt","movie-img","class","movie-img",3,"src",4,"ngIf"],["class","movie-title",3,"routerLink",4,"ngIf"],["class","movie-title",4,"ngIf"],[1,"movie-btn",3,"routerLink"],["alt","movie-img",1,"movie-img",3,"src","routerLink"],["alt","movie-img",1,"movie-img",3,"src"],[1,"movie-title",3,"routerLink"],[1,"movie-title"]],template:function(n,e){1&n&&(t.TgZ(0,"h3",0),t._uU(1,"Ongoing Movies"),t.qZA(),t.TgZ(2,"div",1),t.NdJ("scrolled",function(){return e.onScroll()}),t.TgZ(3,"div",2),t.NdJ("vsUpdate",function(o){return e.incomingMovies=o}),t.YNc(4,Pe,7,8,"div",3),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("infiniteScrollContainer",".movies-container")("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("infiniteScrollDisabled",e.infiniteScrollDisabled),t.xp6(1),t.Q6J("items",e.allMovies),t.xp6(1),t.Q6J("ngForOf",e.incomingMovies))},dependencies:[m.sg,m.O5,b.rH,ee.Ry,we],styles:[".movies-title[_ngcontent-%COMP%]{width:35%;margin:75px auto 20px;color:#e8e5e5;text-align:center;font-size:24px;padding-bottom:10px;border-bottom:2px solid #e8e5e5}[_nghost-%COMP%]     .scrollable-content{display:grid!important;grid-template-columns:repeat(3,30%);gap:30px;margin:40px auto}.movies-container[_ngcontent-%COMP%]{width:70%;height:720px;margin:25px auto}.card[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;height:100%;background-color:#000;border-radius:6px;position:relative;cursor:pointer}.card[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:6px;transition:.4s}.movie-title[_ngcontent-%COMP%]{width:75%;margin:0;padding:0;color:#e8e5e5;position:absolute;left:10%;bottom:10%;font-size:24px;letter-spacing:1px;opacity:0;transition:.4s}.movie-btn[_ngcontent-%COMP%]{visibility:hidden;width:100%;height:15%;cursor:pointer;border:none;border-bottom-left-radius:.6rem;border-bottom-right-radius:.6rem;outline:none;font-size:.9rem;background-color:#f59e0b;color:#e8e5e5;position:absolute;bottom:0;left:0;opacity:0;transition:.4s}.card[_ngcontent-%COMP%]:hover{box-shadow:0 0 3px #e8e5e5}.card[_ngcontent-%COMP%]:hover   .movie-img[_ngcontent-%COMP%]{opacity:.5}.card[_ngcontent-%COMP%]:hover   .movie-title[_ngcontent-%COMP%]{opacity:1}.loading-wrapper[_ngcontent-%COMP%]{background-color:#151414;position:sticky;bottom:0;width:100%;height:30px;line-height:30px;display:block;margin:0 auto;padding:0}@media (min-width: 1400px){.movies-container[_ngcontent-%COMP%]{width:75%}[_nghost-%COMP%]     .scrollable-content{grid-template-columns:repeat(4,22.5%)}}@media (max-width: 800px){.movies-title[_ngcontent-%COMP%]{width:50%;margin:2rem auto;font-size:1.5rem}[_nghost-%COMP%]     .scrollable-content{width:95%!important;gap:5% 3%;grid-template-columns:repeat(2,50%)}.movies-container[_ngcontent-%COMP%]{width:90%}.movie-title[_ngcontent-%COMP%]{font-size:16px}.movie-btn[_ngcontent-%COMP%]{font-size:14px}.card[_ngcontent-%COMP%]:hover   .movie-btn[_ngcontent-%COMP%]{visibility:visible;bottom:-13%;opacity:1}}"]});var Q=f(5593),N=f(1795),ye=f(1481);class R{constructor(n){this.sanitizer=n}transform(n,e){switch(e){case"html":return this.sanitizer.bypassSecurityTrustHtml(n);case"style":return this.sanitizer.bypassSecurityTrustStyle(n);case"script":return this.sanitizer.bypassSecurityTrustScript(n);case"url":return this.sanitizer.bypassSecurityTrustUrl(n);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(n);default:throw new Error(`Invalid safe type specified: ${e}`)}}}function Oe(i,n){if(1&i&&(t._UZ(0,"iframe",16),t.ALo(1,"safe")),2&i){const e=t.oxw();t.Q6J("title",null==e.selected_movie?null:e.selected_movie.name)("src",t.xi3(1,2,null==e.selected_movie?null:e.selected_movie.trailerUrl,"resourceUrl"),t.uOi)}}R.\u0275fac=function(n){return new(n||R)(t.Y36(ye.H7,16))},R.\u0275pipe=t.Yjl({name:"safe",type:R,pure:!0});const se=function(i){return{booked:i}};function Te(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",17),t.NdJ("click",function(){const r=t.CHM(e).index,a=t.oxw();return t.KtG(a.pickDay(r))}),t._uU(1),t.qZA()}if(2&i){const e=n.$implicit,s=t.oxw();t.Q6J("ngClass",t.VKq(2,se,e===s.selectedDay)),t.xp6(1),t.hij(" ",e," ")}}function Ie(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",17),t.NdJ("click",function(){const r=t.CHM(e).index,a=t.oxw();return t.KtG(a.pickSession(r))}),t._uU(1),t.ALo(2,"date"),t.TgZ(3,"small",18),t._uU(4),t.qZA()()}if(2&i){const e=n.$implicit,s=t.oxw();t.Q6J("ngClass",t.VKq(6,se,e===s.selectedSession)),t.xp6(1),t.hij(" ",t.xi3(2,3,null==e?null:e.date,"HH:mm")," "),t.xp6(3),t.Oqu(e.price)}}const ke=function(i,n,e){return[i,n,e]};class H{constructor(n,e,s,o){this.route=n,this.http=e,this.router=s,this.toastMessage=o,this.cinema_id="",this.movie_id="",this.sessions=[],this.dayArr=[],this.sessionsArr=[],this.selectedDay="",this.selectedSession=null,this.dateIsSelected=!1,this.isClicked=!1}ngOnInit(){this.getMovieData()}getParamsData(){this.cinema_id=this.route.snapshot.paramMap.get("cinema-id"),this.movie_id=this.route.snapshot.paramMap.get("movie-id")}getMovieData(){this.getParamsData(),this.http.getMovie("/movies/"+this.movie_id+"?_embed=sessions").subscribe({next:n=>{this.selected_movie=n,this.addTrailerUrlParams(),this.sessions=this.selected_movie.sessions,this.setStartingSessionStates()},error:()=>{this.router.navigateByUrl("movies").then(),this.toastMessage.pageNotFoundErrorMessage()}})}addTrailerUrlParams(){this.selected_movie.trailerUrl+="?autoplay=1&amp;mute=1&amp;&amp;showinfo=0&amp;rel=0&amp;loop=0"}setStartingSessionStates(){this.filterDays(this.dayArr),this.selectedDay=this.dayArr[0],this.filterSessionsByDay(this.selectedDay,this.sessionsArr)}filterDays(n){this.selected_movie.sessions?.map(e=>{n.includes(new Date(e.date).getDate())||(n.push(new Date(e.date).getDate()),n.sort((s,o)=>s-o))})}filterSessionsByDay(n,e){this.selected_movie.sessions?.map(s=>{new Date(s.date).getDate()===n&&(e.push(s),e.sort((o,r)=>new Date(o.date).getTime()-new Date(r.date).getTime()))})}pickDay(n){this.selectedSession=null,this.sessionsArr=[],this.dateIsSelected=!1,this.selectedDay=this.dayArr[n],this.filterSessionsByDay(this.selectedDay,this.sessionsArr)}pickSession(n){this.dateIsSelected=!0,this.selectedSession=this.sessionsArr[n]}toggleWithClick(){this.isClicked=!this.isClicked}}H.\u0275fac=function(n){return new(n||H)(t.Y36(b.gz),t.Y36(V.a),t.Y36(b.F0),t.Y36(Y.z))},H.\u0275cmp=t.Xpm({type:H,selectors:[["app-movie-single"]],decls:20,vars:12,consts:[[1,"movie-title"],[1,"single-wrapper"],[1,"info-block"],[1,"block-one"],[1,"img-wrapper"],["alt","movie-img",3,"src"],[1,"text-info",3,"click"],[1,"block-two"],[1,"trailer-wrapper"],["loading","lazy","allowfullscreen","",3,"title","src",4,"ngIf"],[1,"date-block"],[1,"month"],[1,"days"],["class","border",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"sessions"],["pButton","","pRipple","","type","button","label","Choose tickets",1,"p-button-warning",3,"disabled","routerLink"],["loading","lazy","allowfullscreen","",3,"title","src"],[1,"border",3,"ngClass","click"],[1,"price"]],template:function(n,e){1&n&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),t._UZ(6,"img",5),t.qZA(),t.TgZ(7,"div",6),t.NdJ("click",function(){return e.toggleWithClick()}),t._uU(8),t.qZA()(),t.TgZ(9,"div",7)(10,"div",8),t.YNc(11,Oe,2,5,"iframe",9),t.qZA()()(),t.TgZ(12,"div",10)(13,"h3",11),t._uU(14,"Feb"),t.qZA(),t.TgZ(15,"div",12),t.YNc(16,Te,2,4,"div",13),t.qZA(),t.TgZ(17,"div",14),t.YNc(18,Ie,5,8,"div",13),t.qZA(),t._UZ(19,"button",15),t.qZA()()),2&n&&(t.xp6(1),t.Oqu(null==e.selected_movie?null:e.selected_movie.name),t.xp6(5),t.Q6J("src",null==e.selected_movie?null:e.selected_movie.imgUrl,t.LSH),t.xp6(2),t.hij(" ",null==e.selected_movie?null:e.selected_movie.description," "),t.xp6(3),t.Q6J("ngIf",null==e.selected_movie?null:e.selected_movie.trailerUrl),t.xp6(5),t.Q6J("ngForOf",e.dayArr),t.xp6(2),t.Q6J("ngForOf",e.sessionsArr),t.xp6(1),t.Q6J("disabled",!e.dateIsSelected)("routerLink",t.kEZ(8,ke,"/movies/"+e.cinema_id,null==e.selected_movie?null:e.selected_movie.id,null==e.selectedSession?null:e.selectedSession.id)))},dependencies:[m.mk,m.sg,m.O5,b.rH,Q.Hq,N.H,m.uU,R],styles:["[_nghost-%COMP%]     .p-element.p-ripple.p-button-warning.p-button.p-component{background-color:#f59e0b}[_nghost-%COMP%]     .p-element.p-ripple.p-button-warning.p-button.p-component:hover{background-color:#d97706}[_nghost-%COMP%]     .p-element.p-ripple.p-button-warning.p-button.p-component:active{background-color:#b45309}[_nghost-%COMP%]     .p-element.p-ripple.p-button-success.p-button.p-component{color:#e8e5e5;background-color:#22c55e}[_nghost-%COMP%]     .p-element.p-ripple.p-button-success.p-button.p-component:hover{background-color:#16a34a}[_nghost-%COMP%]     .p-element.p-ripple.p-button-success.p-button.p-component:active{background-color:#15803d}[_nghost-%COMP%]     .p-element.p-ripple.p-button-outlined.p-button-warning.back-btn.p-button.p-component{background-color:transparent;color:#f59e0b}.single-wrapper[_ngcontent-%COMP%]{margin:0 auto 2rem;padding:1rem;width:60%;max-width:850px;display:flex;flex-direction:column;justify-content:center;color:#e8e5e5;background-color:#3a343480;border-radius:10px;box-shadow:0 0 2px #e8e5e5}.movie-title[_ngcontent-%COMP%]{color:#e8e5e5;text-align:center;margin:4.5rem 0}.info-block[_ngcontent-%COMP%]{width:80%;padding:1rem;display:flex;margin:0 auto;flex-direction:column;justify-content:center}.block-one[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;gap:15px}.img-wrapper[_ngcontent-%COMP%], .img-wrapper[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:220px;height:300px;border-radius:8px;box-shadow:0 0 2px #e8e5e5}.text-info[_ngcontent-%COMP%]{width:300px;font-size:1.3rem}.block-two[_ngcontent-%COMP%]{margin:2rem}.trailer-wrapper[_ngcontent-%COMP%], .trailer-wrapper[_ngcontent-%COMP%] > iframe[_ngcontent-%COMP%]{width:550px;height:320px;margin:0 auto;border:none;border-radius:8px;box-shadow:0 0 2px #e8e5e5}.date-block[_ngcontent-%COMP%]{width:45%;display:flex;box-shadow:0 0 2px #e8e5e5;border-radius:8px;margin:2rem auto;padding:2rem;background-color:#1f1d1d;gap:1rem;flex-direction:column}.month[_ngcontent-%COMP%]{width:75px;padding-bottom:.5rem;border-bottom:1px solid #e8e5e5}.days[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;gap:.5rem}.border[_ngcontent-%COMP%]{padding:.5rem .8rem;border:1px solid #e8e5e5;cursor:pointer;transition:.4s;border-radius:5px;text-align:center}.border[_ngcontent-%COMP%]:hover, .booked[_ngcontent-%COMP%]{background-color:#e8e5e5;color:#1f1d1d}.sessions[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;gap:.5rem}.day[_ngcontent-%COMP%]{color:#f59e0b}.price[_ngcontent-%COMP%]{color:#22c55e}@media (max-width: 1000px){.single-wrapper[_ngcontent-%COMP%]{width:90%}.movie-title[_ngcontent-%COMP%]{font-size:1.5rem}.info-block[_ngcontent-%COMP%]{width:95%}.block-one[_ngcontent-%COMP%]{gap:10px}.text-info[_ngcontent-%COMP%]{width:130px;font-size:.8rem}.block-two[_ngcontent-%COMP%]{width:100%;height:200px;margin:2rem auto}.trailer-wrapper[_ngcontent-%COMP%], .trailer-wrapper[_ngcontent-%COMP%] > iframe[_ngcontent-%COMP%]{margin:0 auto;width:100%;height:200px}.img-wrapper[_ngcontent-%COMP%], .img-wrapper[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:115px;height:160px}.date-block[_ngcontent-%COMP%]{width:88%;padding:1.5rem;margin:2rem auto 3rem;font-size:.9rem}}"]});var We=f(2101),Ee=f(8613),w=f(9592),ze=f(805);const De=["container"],Ae=["content"],Be=["xBar"],Re=["yBar"];function He(i,n){1&i&&t.GkF(0)}const Ge=["*"];let Ue=(()=>{class i{constructor(e,s,o){this.el=e,this.zone=s,this.cd=o,this.timeoutFrame=r=>setTimeout(r,0)}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.moveBar(),this.moveBar=this.moveBar.bind(this),this.onXBarMouseDown=this.onXBarMouseDown.bind(this),this.onYBarMouseDown=this.onYBarMouseDown.bind(this),this.onDocumentMouseMove=this.onDocumentMouseMove.bind(this),this.onDocumentMouseUp=this.onDocumentMouseUp.bind(this),window.addEventListener("resize",this.moveBar),this.contentViewChild.nativeElement.addEventListener("scroll",this.moveBar),this.contentViewChild.nativeElement.addEventListener("mouseenter",this.moveBar),this.xBarViewChild.nativeElement.addEventListener("mousedown",this.onXBarMouseDown),this.yBarViewChild.nativeElement.addEventListener("mousedown",this.onYBarMouseDown),this.calculateContainerHeight(),this.initialized=!0})}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template})}calculateContainerHeight(){let e=this.containerViewChild.nativeElement,s=this.contentViewChild.nativeElement,o=this.xBarViewChild.nativeElement,r=getComputedStyle(e),a=getComputedStyle(o),l=w.p.getHeight(e)-parseInt(a.height,10);"none"!=r["max-height"]&&0==l&&(e.style.height=s.offsetHeight+parseInt(a.height,10)>parseInt(r["max-height"],10)?r["max-height"]:s.offsetHeight+parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth)+"px")}moveBar(){let e=this.containerViewChild.nativeElement,s=this.contentViewChild.nativeElement,o=this.xBarViewChild.nativeElement,r=s.scrollWidth,a=s.clientWidth,l=-1*(e.clientHeight-o.clientHeight);this.scrollXRatio=a/r;let h=this.yBarViewChild.nativeElement,c=s.scrollHeight,d=s.clientHeight,u=-1*(e.clientWidth-h.clientWidth);this.scrollYRatio=d/c,this.requestAnimationFrame(()=>{if(this.scrollXRatio>=1)w.p.addClass(o,"p-scrollpanel-hidden");else{w.p.removeClass(o,"p-scrollpanel-hidden");const p=Math.max(100*this.scrollXRatio,10);o.style.cssText="width:"+p+"%; left:"+s.scrollLeft*(100-p)/(r-a)+"%;bottom:"+l+"px;"}if(this.scrollYRatio>=1)w.p.addClass(h,"p-scrollpanel-hidden");else{w.p.removeClass(h,"p-scrollpanel-hidden");const p=Math.max(100*this.scrollYRatio,10);h.style.cssText="height:"+p+"%; top: calc("+s.scrollTop*(100-p)/(c-d)+"% - "+o.clientHeight+"px);right:"+u+"px;"}}),this.cd.markForCheck()}onYBarMouseDown(e){this.isYBarClicked=!0,this.lastPageY=e.pageY,w.p.addClass(this.yBarViewChild.nativeElement,"p-scrollpanel-grabbed"),w.p.addClass(document.body,"p-scrollpanel-grabbed"),document.addEventListener("mousemove",this.onDocumentMouseMove),document.addEventListener("mouseup",this.onDocumentMouseUp),e.preventDefault()}onXBarMouseDown(e){this.isXBarClicked=!0,this.lastPageX=e.pageX,w.p.addClass(this.xBarViewChild.nativeElement,"p-scrollpanel-grabbed"),w.p.addClass(document.body,"p-scrollpanel-grabbed"),document.addEventListener("mousemove",this.onDocumentMouseMove),document.addEventListener("mouseup",this.onDocumentMouseUp),e.preventDefault()}onDocumentMouseMove(e){this.isXBarClicked?this.onMouseMoveForXBar(e):(this.isYBarClicked||this.onMouseMoveForXBar(e),this.onMouseMoveForYBar(e))}onMouseMoveForXBar(e){let s=e.pageX-this.lastPageX;this.lastPageX=e.pageX,this.requestAnimationFrame(()=>{this.contentViewChild.nativeElement.scrollLeft+=s/this.scrollXRatio})}onMouseMoveForYBar(e){let s=e.pageY-this.lastPageY;this.lastPageY=e.pageY,this.requestAnimationFrame(()=>{this.contentViewChild.nativeElement.scrollTop+=s/this.scrollYRatio})}scrollTop(e){let s=this.contentViewChild.nativeElement.scrollHeight-this.contentViewChild.nativeElement.clientHeight;this.contentViewChild.nativeElement.scrollTop=e=e>s?s:e>0?e:0}onDocumentMouseUp(e){w.p.removeClass(this.yBarViewChild.nativeElement,"p-scrollpanel-grabbed"),w.p.removeClass(this.xBarViewChild.nativeElement,"p-scrollpanel-grabbed"),w.p.removeClass(document.body,"p-scrollpanel-grabbed"),document.removeEventListener("mousemove",this.onDocumentMouseMove),document.removeEventListener("mouseup",this.onDocumentMouseUp),this.isXBarClicked=!1,this.isYBarClicked=!1}requestAnimationFrame(e){(window.requestAnimationFrame||this.timeoutFrame)(e)}ngOnDestroy(){this.initialized&&(window.removeEventListener("resize",this.moveBar),this.contentViewChild.nativeElement.removeEventListener("scroll",this.moveBar),this.contentViewChild.nativeElement.removeEventListener("mouseenter",this.moveBar),this.xBarViewChild.nativeElement.removeEventListener("mousedown",this.onXBarMouseDown),this.yBarViewChild.nativeElement.removeEventListener("mousedown",this.onYBarMouseDown))}refresh(){this.moveBar()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO))},i.\u0275cmp=t.Xpm({type:i,selectors:[["p-scrollPanel"]],contentQueries:function(e,s,o){if(1&e&&t.Suo(o,ze.jx,4),2&e){let r;t.iGM(r=t.CRH())&&(s.templates=r)}},viewQuery:function(e,s){if(1&e&&(t.Gf(De,5),t.Gf(Ae,5),t.Gf(Be,5),t.Gf(Re,5)),2&e){let o;t.iGM(o=t.CRH())&&(s.containerViewChild=o.first),t.iGM(o=t.CRH())&&(s.contentViewChild=o.first),t.iGM(o=t.CRH())&&(s.xBarViewChild=o.first),t.iGM(o=t.CRH())&&(s.yBarViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:Ge,decls:11,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[1,"p-scrollpanel-wrapper"],[1,"p-scrollpanel-content"],["content",""],[4,"ngTemplateOutlet"],[1,"p-scrollpanel-bar","p-scrollpanel-bar-x"],["xBar",""],[1,"p-scrollpanel-bar","p-scrollpanel-bar-y"],["yBar",""]],template:function(e,s){1&e&&(t.F$t(),t.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3,4),t.Hsn(5),t.YNc(6,He,1,0,"ng-container",5),t.qZA()(),t._UZ(7,"div",6,7)(9,"div",8,9),t.qZA()),2&e&&(t.Tol(s.styleClass),t.Q6J("ngClass","p-scrollpanel p-component")("ngStyle",s.style),t.xp6(6),t.Q6J("ngTemplateOutlet",s.contentTemplate))},dependencies:[m.mk,m.tP,m.PC],styles:[".p-scrollpanel-wrapper{overflow:hidden;width:100%;height:100%;position:relative;z-index:1;float:left}.p-scrollpanel-content{height:calc(100% + 18px);width:calc(100% + 18px);padding:0 18px 18px 0;position:relative;overflow:auto;box-sizing:border-box}.p-scrollpanel-bar{position:relative;background:#c1c1c1;border-radius:3px;z-index:2;cursor:pointer;opacity:0;transition:opacity .25s linear}.p-scrollpanel-bar-y{width:9px;top:0}.p-scrollpanel-bar-x{height:9px;bottom:0}.p-scrollpanel-hidden{visibility:hidden}.p-scrollpanel:hover .p-scrollpanel-bar,.p-scrollpanel:active .p-scrollpanel-bar{opacity:1}.p-scrollpanel-grabbed{-webkit-user-select:none;user-select:none}\n"],encapsulation:2,changeDetection:0}),i})(),Le=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[m.ez]}),i})();class G{transform(n,e){return"seat"===e?n.slice(6):"row"===e&&8===n.length?n.slice(4,n.length-3):"row"===e&&7===n.length?n.slice(4,n.length-2):n}}function Fe(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",29),t.NdJ("click",function(o){t.CHM(e);const r=t.oxw(2);return t.KtG(r.selectSeat(o.target))}),t.qZA()}if(2&i){const e=n.$implicit,s=t.oxw().$implicit;t.Q6J("id","seat"+s+"-"+e)}}function Ze(i,n){if(1&i&&(t.TgZ(0,"div",27),t.YNc(1,Fe,1,1,"div",28),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.generateTimes(10))}}function qe(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",33)(1,"div",34),t.NdJ("click",function(){const r=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.deleteTicket(r))}),t._uU(2,"x"),t.qZA(),t.TgZ(3,"span",35),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"div",36)(7,"span",37),t._uU(8),t.ALo(9,"Ticket"),t.qZA(),t.TgZ(10,"span",38),t._uU(11),t.ALo(12,"Ticket"),t.qZA()(),t.TgZ(13,"span",39),t._uU(14),t.qZA()()}if(2&i){const e=n.$implicit,s=t.oxw(2);t.xp6(4),t.Oqu(t.xi3(5,4,s.sessionInfo.date,"HH:mm")),t.xp6(4),t.hij(" Row ",t.xi3(9,7,e.id,"row")," "),t.xp6(3),t.hij(" Seat ",t.xi3(12,10,e.id,"seat")," "),t.xp6(3),t.hij("",null==s.sessionInfo?null:s.sessionInfo.price," AMD")}}G.\u0275fac=function(n){return new(n||G)},G.\u0275pipe=t.Yjl({name:"Ticket",type:G,pure:!0});const Ve=function(){return{width:"100%",height:"300px"}};function Ye(i,n){if(1&i&&(t.TgZ(0,"p-scrollPanel",30)(1,"div",31),t.YNc(2,qe,15,13,"div",32),t.qZA()()),2&i){const e=t.oxw();t.Akn(t.DdM(3,Ve)),t.xp6(2),t.Q6J("ngForOf",e.ticketsArr)}}class U{constructor(n,e,s,o,r,a){this.requestHttp=n,this.sendHttp=e,this.route=s,this.router=o,this.userService=r,this.toastMessage=a,this.movie_id="",this.session_id="",this.updateSeatsArr=[],this.ticketsArr=[],this.ticketsAllPrice=0,this.reservedSeats=[]}ngOnInit(){this.getParamsData(),this.getMovieInfo(),this.getSessionInfo()}getParamsData(){this.movie_id=this.route.snapshot.paramMap.get("movie-id"),this.session_id=this.route.snapshot.paramMap.get("session-id")}getMovieInfo(){this.requestHttp.getMovie("/movies/"+this.movie_id).pipe((0,D.q)(1)).subscribe({next:n=>{this.selected_movie=n},error:()=>{this.router.navigateByUrl("movies/all").then(),this.toastMessage.pageNotFoundErrorMessage()}})}getSessionInfo(){this.requestHttp.getSession(this.session_id).pipe((0,D.q)(1)).subscribe({next:n=>{this.sessionInfo=n,this.reservedSeats=this.sessionInfo.seats;for(let e of this.reservedSeats)document.getElementById(e)?.classList.add("reserved")},error:()=>{this.toastMessage.somethingWentWrongMessage()}})}generateTimes(n){let e=[];for(let s=1;s<=n;s++)e.push(s);return e}selectSeat(n){"row"!==n.className&&!n.classList.contains("reserved")&&(n.classList.toggle("selected"),this.ticketsArr.includes(n)?(this.sessionInfo.price&&(this.ticketsAllPrice-=this.sessionInfo.price),this.ticketsArr.splice(this.ticketsArr.indexOf(n),1)):(this.ticketsArr.push(n),this.sessionInfo.price&&(this.ticketsAllPrice+=this.sessionInfo.price)))}deleteTicket(n){n.classList.remove("selected"),this.sessionInfo.price&&(this.ticketsAllPrice-=this.sessionInfo.price),this.ticketsArr.splice(this.ticketsArr.indexOf(n),1)}reserveSeats(){this.checkSignInStateAndSendData()}checkSignInStateAndSendData(){return"false"===localStorage.getItem("signedIn")?(this.toastMessage.notSignedInErrorMessage(),void this.router.navigate(["/auth/login"]).then()):(this.toastMessage.reserveTicketsSuccessfullyMessage(),this.modifySelectedSeats(),void this.sendReservedSeatsToDB())}modifySelectedSeats(){this.updatedSessionInfo=this.sessionInfo,this.updateSeatsArr=this.ticketsArr.map(n=>n.id);for(let n of this.updateSeatsArr)this.updatedSessionInfo.seats.includes(n)||this.updatedSessionInfo.seats.push(n)}sendReservedSeatsToDB(){this.sendHttp.sendReservedSeats(this.session_id,this.updatedSessionInfo).pipe((0,D.q)(1)).subscribe({next:()=>{this.router.navigate(["/movies/all"]).then()},error:()=>{this.toastMessage.somethingWentWrongMessage()}})}}U.\u0275fac=function(n){return new(n||U)(t.Y36(V.a),t.Y36(We.l),t.Y36(b.gz),t.Y36(b.F0),t.Y36(Ee.K),t.Y36(Y.z))},U.\u0275cmp=t.Xpm({type:U,selectors:[["app-session-book"]],decls:40,vars:13,consts:[[1,"session-wrapper"],[1,"info-block"],[1,"movie-name"],[1,"session-info"],[1,"session-date"],[1,"main-block"],[1,"seats-block"],[1,"screen"],["class","row",4,"ngFor","ngForOf"],[1,"seat-info"],[1,"seat-states"],[1,"seat-state","selected"],[1,"seat-state","free"],[1,"seat-state","reserved"],[1,"state-descriptions"],[1,"state-description"],[1,"tickets-block"],[1,"tickets-heading"],["styleClass","customScrollBar",3,"style",4,"ngIf"],[1,"purchase-block"],[1,"purchase-info-block"],[1,"ticket-count"],[1,"cost-block"],[1,"cost"],[1,"priceSum"],[1,"buy-btn-block"],["pButton","","pRipple","","type","button","label","Buy",1,"p-button-success",3,"disabled","click"],[1,"row"],["class","seat",3,"id","click",4,"ngFor","ngForOf"],[1,"seat",3,"id","click"],["styleClass","customScrollBar"],[1,"tickets-wrapper"],["class","ticket",4,"ngFor","ngForOf"],[1,"ticket"],[1,"cancel-btn",3,"click"],[1,"ticket-date"],[1,"seat-number"],[1,"seat-row"],[1,"seat-seat"],[1,"ticket-price"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3)(5,"p",4),t._uU(6),t.ALo(7,"date"),t.ALo(8,"date"),t.qZA()()(),t.TgZ(9,"div",5)(10,"div",6),t._UZ(11,"div",7),t.YNc(12,Ze,2,1,"div",8),t.qZA(),t.TgZ(13,"div",9)(14,"div",10),t._UZ(15,"div",11)(16,"div",12)(17,"div",13),t.qZA(),t.TgZ(18,"div",14)(19,"div",15),t._uU(20,"Selected"),t.qZA(),t.TgZ(21,"div",15),t._uU(22,"Free"),t.qZA(),t.TgZ(23,"div",15),t._uU(24,"Reserved"),t.qZA()()(),t.TgZ(25,"div",16)(26,"h3",17),t._uU(27,"Tickets"),t.qZA(),t.YNc(28,Ye,3,4,"p-scrollPanel",18),t.TgZ(29,"div",19)(30,"div",20)(31,"div",21),t._uU(32),t.qZA(),t.TgZ(33,"div",22)(34,"span",23),t._uU(35,"Cost"),t.qZA(),t.TgZ(36,"div",24),t._uU(37),t.qZA()()(),t.TgZ(38,"div",25)(39,"button",26),t.NdJ("click",function(){return e.reserveSeats()}),t.qZA()()()()()()),2&n&&(t.xp6(3),t.Oqu(null==e.selected_movie?null:e.selected_movie.name),t.xp6(3),t.AsE(" ",t.lcZ(7,8,null==e.sessionInfo?null:e.sessionInfo.date)," ",t.xi3(8,10,null==e.sessionInfo?null:e.sessionInfo.date,"HH:mm")," "),t.xp6(6),t.Q6J("ngForOf",e.generateTimes(6)),t.xp6(16),t.Q6J("ngIf",e.ticketsArr.length),t.xp6(4),t.hij("",e.ticketsArr.length,"x Tickets"),t.xp6(5),t.hij("",e.ticketsAllPrice," AMD"),t.xp6(2),t.Q6J("disabled",!e.ticketsArr.length))},dependencies:[m.sg,m.O5,Ue,Q.Hq,N.H,m.uU,G],styles:["[_nghost-%COMP%]     .p-element.p-ripple.p-button-warning.p-button.p-component{background-color:#f59e0b}[_nghost-%COMP%]     .p-element.p-ripple.p-button-warning.p-button.p-component:hover{background-color:#d97706}[_nghost-%COMP%]     .p-element.p-ripple.p-button-warning.p-button.p-component:active{background-color:#b45309}[_nghost-%COMP%]     .p-element.p-ripple.p-button-success.p-button.p-component{color:#e8e5e5;background-color:#22c55e}[_nghost-%COMP%]     .p-element.p-ripple.p-button-success.p-button.p-component:hover{background-color:#16a34a}[_nghost-%COMP%]     .p-element.p-ripple.p-button-success.p-button.p-component:active{background-color:#15803d}[_nghost-%COMP%]     .p-element.p-ripple.p-button-outlined.p-button-warning.back-btn.p-button.p-component{background-color:transparent;color:#f59e0b}[_nghost-%COMP%]     .p-scrollpanel-bar{background-color:#b0650c}.session-wrapper[_ngcontent-%COMP%]{margin:6rem auto;padding:2rem;width:60%;min-height:50vh;background-color:#3a343480;border-radius:1rem;box-shadow:0 0 2px #e8e5e5}.movie-name[_ngcontent-%COMP%]{color:#e8e5e5;text-align:center;font-size:24px}.session-info[_ngcontent-%COMP%]{color:#e8e5e5}.main-block[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:25px}.seats-block[_ngcontent-%COMP%]{width:400px;display:flex;margin:auto;flex-direction:column;align-items:center;box-shadow:0 0 2px #e8e5e5;background-color:#1f1d1d;padding:1rem;border-radius:1rem}.screen[_ngcontent-%COMP%]{width:300px;margin:auto;height:25px;border-top:1px solid #e8e5e5;border-radius:10px}.row[_ngcontent-%COMP%]{padding:0 1.7rem;margin-bottom:.4rem;box-sizing:border-box;width:100%;display:flex;justify-content:center;align-items:center;gap:.5rem;grid-gap:.5rem}.seat[_ngcontent-%COMP%]{width:1.2rem;height:1.3rem;border-radius:.4rem .4rem .1rem .1rem;cursor:pointer;background-color:#a6a2a2;transition:.4s}.seat-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:10px;width:400px;height:100px;border-radius:1rem;margin:0 auto;padding:1rem;background-color:#1f1d1d;box-shadow:0 0 2px #e8e5e5;color:#fff}.session-date[_ngcontent-%COMP%]{font-size:16px;text-align:center}.seat-states[_ngcontent-%COMP%], .state-descriptions[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-evenly;align-items:center;text-align:center}.seat-state[_ngcontent-%COMP%], .state-description[_ngcontent-%COMP%]{width:25%;height:50%;font-size:.9rem}.seat-state[_ngcontent-%COMP%]{width:1.2rem;height:1.3rem;border-radius:.4rem .4rem .1rem .1rem;background-color:#a6a2a2}.selected[_ngcontent-%COMP%]{background-color:#b0650c}.reserved[_ngcontent-%COMP%]{cursor:default;border:2px solid #b0650c}.tickets-block[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:1.5rem;padding:1rem}.tickets-heading[_ngcontent-%COMP%]{text-align:center;color:#e8e5e5;padding-bottom:3px;border-bottom:1px solid #e8e5e5}.tickets-wrapper[_ngcontent-%COMP%]{width:100%}.ticket[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-around;align-items:center;width:85%;height:75px;border-radius:1rem;margin:1rem auto;padding:1rem;background-color:#1f1d1d;box-shadow:0 0 2px #e8e5e5;color:#e8e5e5}.ticket-price[_ngcontent-%COMP%]{color:#22c55e}.ticket-count[_ngcontent-%COMP%]{border-bottom:1px solid #e8e5e5;padding-bottom:2px;margin-bottom:7px}.cancel-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:10px;text-align:center;width:15px;height:15px;line-height:15px;font-size:.8rem;padding:0;border-radius:.2rem;background-color:#ef4444;color:#e8e5e5;cursor:pointer;transition:.4s}.cancel-btn[_ngcontent-%COMP%]:hover{background-color:#be2e2e}.purchase-block[_ngcontent-%COMP%]{display:flex;justify-content:space-around;gap:20px;color:#e8e5e5}.cost[_ngcontent-%COMP%]{font-size:14px;display:block;width:100px}.buy-btn-block[_ngcontent-%COMP%]{align-self:center}@media (max-width: 650px){.session-wrapper[_ngcontent-%COMP%]{width:90%;margin:10% auto}.seats-block[_ngcontent-%COMP%]{width:100%;padding:1rem 0}.screen[_ngcontent-%COMP%]{width:80%}.seat[_ngcontent-%COMP%], .seat-state[_ngcontent-%COMP%]{width:20px;height:18px}.seat-info[_ngcontent-%COMP%]{width:100%}.state-description[_ngcontent-%COMP%]{font-size:16px;height:auto}.ticket[_ngcontent-%COMP%]{width:90%}.tickets-heading[_ngcontent-%COMP%]{font-size:16px}.ticket-date[_ngcontent-%COMP%], .ticket-price[_ngcontent-%COMP%]{font-size:14px}.seat-row[_ngcontent-%COMP%], .seat-seat[_ngcontent-%COMP%]{font-size:12px}.cancel-btn[_ngcontent-%COMP%]:hover{background-color:#ef4444}.purchase-block[_ngcontent-%COMP%]{gap:1.5rem;font-size:.7rem}}"]});const je=[{path:":cinema-id",component:B},{path:":cinema-id/:movie-id",component:H},{path:":cinema-id/:movie-id/:session-id",component:U},{path:"",redirectTo:"all",pathMatch:"full"},{path:"**",redirectTo:"",pathMatch:"full"}];class W{}W.\u0275fac=function(n){return new(n||W)},W.\u0275mod=t.oAB({type:W}),W.\u0275inj=t.cJS({imports:[b.Bz.forChild(je),b.Bz]});class E{}E.\u0275fac=function(n){return new(n||E)},E.\u0275mod=t.oAB({type:E}),E.\u0275inj=t.cJS({imports:[m.ez,W,ee.Rq,Le,Q.hJ,N.T,be]})}}]);